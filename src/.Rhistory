knitr::opts_chunk$set(fig.path = '../assets/images/')
knitr::render_jekyll()
library(lubridate)
library(tibble)
library(dplyr)
library(tidyr)
library(ggplot2)
library(forcats)
library(purrr)
set.seed(1234)
sales <- tibble(date = ymd(rep(c(20180101, 20180102, 20180103), 3)),
product = rep(c("A", "B", "C"), each = 3),
sales = sample(1:20, size = 9, replace = T))
sales
cor_matrix <-
sales %>%
spread(key = product, value = sales) %>%
select(-date) %>%
cor()
cor_matrix
cor_tidy <-
cor_matrix %>%
as.data.frame() %>%
rownames_to_column(var = "product1") %>%
gather(key = product2, value = corr, -product1)
cor_tidy
ggplot(cor_tidy, aes(x = product1, y = product2, fill = corr)) + geom_tile() + scale_fill_gradient2(limits = c(-1, 1))
cor_tidy %>%
filter(product1 != product2) %>%
distinct(products = paste(pmin(product1, product2),
pmax(product1, product2), sep = "_vs_"), .keep_all = TRUE) %>%
ggplot(aes(x = fct_reorder(products, corr), y = corr, fill = corr > 0.7)) +
geom_col(width = 0.7) +
coord_flip() +
ylim(-1, 1) +
xlab("products") +
theme(aspect.ratio = 1/3) +
scale_fill_discrete(name = "Cor > 0.7",
breaks = c(TRUE, FALSE),
labels = c("Yes", "No"))
values <- c("A", "B", "C")
df <- expand.grid(ID1 = values, ID2 = values, ID3 = values, stringsAsFactors = FALSE)
df
distinct(df, ID = pmap_chr(select(df, starts_with("ID")),
~paste0(sort(c(...)), collapse="_")))
df
sales
install.packages("corrr")
install.packages("corrr")
library("devtools", lib.loc="~/R/win-library/3.5")
devtools::install_github("drsimonj/corrr")
devtools::install_github("drsimonj/corrr")
knitr::opts_chunk$set(fig.path = '../assets/images/')
knitr::render_jekyll()
knitr::opts_chunk$set(fig.path = '../assets/images/')
knitr::render_jekyll()
library(corrr)
sales %>%
select(-date) %>%
correlate()
library(dplyr)
sales %>%
select(-date) %>%
correlate()
?correlate
library(dplyr)
sales %>%
spread(key = product, value = sales) %>%
select(-date) %>%
correlate()
library(dplyr)
library(tidyr)
sales %>%
spread(key = product, value = sales) %>%
select(-date) %>%
correlate()
?focus
library(dplyr)
library(tidyr)
sales %>%
spread(key = product, value = sales) %>%
select(-date) %>%
correlate() %>%
stretch()
library(dplyr)
library(tidyr)
sales %>%
spread(key = product, value = sales) %>%
select(-date) %>%
correlate() %>%
stretch()
library(dplyr)
library(tidyr)
sales %>%
spread(key = product, value = sales) %>%
select(-date) %>%
correlate() %>%
shave() %>%
stretch()
library(dplyr)
library(tidyr)
sales %>%
spread(key = product, value = sales) %>%
select(-date) %>%
correlate() %>%
shave() %>%
stretch() %>%
drop_na()
shave
library(dplyr)
library(tidyr)
sales %>%
spread(key = product, value = sales) %>%
select(-date) %>%
correlate() %>%
shave() %>%
stretch() %>%
rplot()
library(dplyr)
library(tidyr)
sales %>%
spread(key = product, value = sales) %>%
select(-date) %>%
correlate() %>%
shave() %>%
#stretch() %>%
rplot()
library(dplyr)
library(tidyr)
sales %>%
spread(key = product, value = sales) %>%
select(-date) %>%
correlate() %>%
shave() %>%
stretch() %>%
drop_na()
library(dplyr)
library(tidyr)
sales %>%
spread(key = product, value = sales) %>%
select(-date) %>%
correlate() %>%
shave() %>%
stretch(na.rm = TRUE)
knitr::render_jekyll()
knitr::opts_chunk$set(fig.path = '../assets/images/')
knitr::render_jekyll()
setwd("C:/Users/alberto/Dropbox/albertotb.github.io/src")
knitr::knit("2019-01-25-Test.Rmd")
knitr::knit("2019-01-28-Tidyr-example.Rmd")
